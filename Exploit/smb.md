## General Enumeration
```
nmap -Pn -n -p139,445 --script smb-* $ip
enum4linux -a $ip
```
## List shares
```
smbmap -H $ip
```
## Get share items recursively
```
smbmap -H $ip -R <share>
smbmap -H $ip -d <domain> -u <user> -p <password>
smbclient -L \\$ip -N
```
## Protocol Error?
```
smbclient -L \\$ip -N --option='client min protocol=NT1'
smbclient -L \\$ip -U <user>
Connecting to a share
```
## Anonymously
```
smbclient //$ip/share -N
smbmap -H [ip/hostname]
rpcclient -U "" -N [ip]
```
## Authenticated
```
smbclient //$ip/share -U <username>
```
## Protocol Error?
```
smbclient //$ip/share -N --option='client min protocol=NT1'
```

## PasstheHash?

```
pth-winexe -U administrator //$ip cmd
```

## Login to windows machine via winexe

```
winexe -U username //$ip "cmd.exe" --system
```
